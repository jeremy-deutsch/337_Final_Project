<html>
<head>
	<title>We made an idle game!</title>
    
    <style type="text/css">
    button {
        visibility: hidden;
    }

    #sellCodeButton {
        visibility: visible;
    }
    </style>

</head>
<body>
	<p>You've written <label id="lines">0</label> lines of code!</p>
    <p>You've grown <label id="hands">0</label> extra hands.</p>
    <p>You've had <label id="cups">0</label> cups of coffee.</p>
	<p>You've been coding for <label id="seconds">0</label> seconds.</p>
    <p>You've made $<label id="money">0</label>.</p>
    <button id="sellCodeButton" onclick="sellCode()" style>Sell Code for $<label id="codeValue">0</label></button>
	<button id="powerUpButton" onclick="powerUp(1, powerUpCost)">Power Up! ($<label id="powerUpPrice">5</label>)</button>
	<button id="speedUpButton" onclick="speedUp(1, speedUpCost)">Speed Up! ($<label id="speedUpPrice">15</label>)</button>
	<button id="superPowerUpButton" onclick="powerUp(5, powerUpCost*4)">Power Up x5 ($<label id="superPowerUpPrice">20</label>)</button>
    <button id="powerUpTwentyButton" onclick="powerUp(20, powerUpCost*12)">Power Up x20 ($<label id="powerUpTwentyPrice">60</label>)</button>
    <script type="text/javascript">
        var codeValue = document.getElementById("codeValue");
        var lines = document.getElementById("lines");
        var hands = document.getElementById("hands");
        var cups = document.getElementById("cups");
        var money = document.getElementById("money");


        var sellCodeButton = document.getElementById("sellCodeButton");
        var powerUpButton = document.getElementById("powerUpButton");
        var speedUpButton = document.getElementById("speedUpButton");
        var superPowerUpButton = document.getElementById("superPowerUpButton");
        var powerUpTwentyButton = document.getElementById("powerUpTwentyButton");


        var powerUpPrice = document.getElementById("powerUpPrice");
        var powerUpCost = 5;
        var speedUpPrice = document.getElementById("speedUpPrice");
        var speedUpCost = 15;
        var superPowerUpPrice = document.getElementById("superPowerUpPrice");
        var powerUpTwentyPrice = document.getElementById("powerUpTwentyPrice");

        var cash = 0.00;
        var codeDollars = 0.0000;
        var linesPer = 1;
        var totalLines = 0.00;
        var counter = 0;
        var speed = 10;
        var coffee = 0;
        setInterval(update, 100);

        var numButtons = 0;
        var buttonCosts = [powerUpCost, speedUpCost, powerUpCost * 4, powerUpCost * 12];
        var buttonsArray = [powerUpButton, speedUpButton, superPowerUpButton, powerUpTwentyButton];

        var seconds = document.getElementById("seconds");
        var time = 0;

        setInterval(setSeconds, 1000);

        function setSeconds() {
            time++;
            seconds.innerHTML = time;
        }
        
        function update() {
            counter++;
            if (counter >= speed) {
                totalLines += linesPer;
                lines.innerHTML = totalLines;
                codeDollars = (totalLines * (Math.pow(1.0000001, totalLines)));
                codeDollars = dollars(codeDollars);
                //console.log("multiplier: " + Math.pow(1.0000001, totalLines));
                codeValue.innerHTML = codeDollars;
                counter = 0;
            }
        }

        function setLines() {
            totalLines += linesPer;
            lines.innerHTML = totalLines;
        }

        function powerUp(power, cost) {
        	if (cash >= (cost)) {
                cash -= cost;
                linesPer += power;
                for (var i = 0; i < power; i++) {
                    powerUpCost *= 1.05;
                }                
                powerUpCost = dollars(powerUpCost);
                powerUpPrice.innerHTML = powerUpCost;
                superPowerUpPrice.innerHTML = dollars(powerUpCost * 4);
                powerUpTwentyPrice.innerHTML = dollars(powerUpCost * 12);
                cash = Math.floor(cash * 100) / 100;
                money.innerHTML = cash;
            }
            hands.innerHTML = linesPer - 1;
        }

        function speedUp(accel, cost) {
            
            if (cash >= cost) {
                cash -= cost;
                cash = dollars(cash);
                money.innerHTML = cash;
                for (var i = 0; i < accel; i++) {
                    speed = speed/2;
                    coffee++;
                    speedUpCost *= 10;

                }
                speedUpCost = Math.floor(speedUpCost * 100) / 100;
                if (speed <= 1) {
                    speedUpButton.disabled = true;
                }
                else {
                    speedUpPrice.innerHTML = speedUpCost;
                }
                cups.innerHTML = coffee;
                console.log(speed);
            }
        }


        function sellCode() {
            cash += codeDollars;
            cash = dollars(cash);
            codeDollars = 0;
            totalLines = 0;
            money.innerHTML = cash;
            lines.innerHTML = 0;
            codeValue.innerHTML = 0;
            checkButtons();
        }

        function checkButtons() {
            var buttonsFull = false;
            while(!buttonsFull) {
                if (numButtons < buttonCosts.length && cash >= buttonCosts[numButtons]) {
                    buttonsArray[numButtons].style.visibility = "visible";
                    numButtons++;
                }
                else {
                    buttonsFull = true;
                }
            }
        }

        function dollars(num) {
            return Math.floor(num * 100) / 100;
        }
    </script>
</body>
</html>